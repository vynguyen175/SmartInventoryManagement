@model IEnumerable<SmartInventoryManagement.Models.Product>

@{
    ViewData["Title"] = "Products";
    var selectedCategory = Context.Request.Query["categoryFilter"];
    var searchQuery = Context.Request.Query["search"];
    var sortOrder = Context.Request.Query["sortOrder"];
}

<h1>Products</h1>

<!-- Create New Product Button -->
<a href="@Url.Action("Create", "Product")" class="btn btn-success mb-3" onclick="testAjax()">Create New Product</a>

<!-- Search and Filter Form -->
<div id="searchFilterContainer">
    @await Html.PartialAsync("_SearchFilterForm")
</div>

<!-- Product List -->
<div id="productListContainer">
    @await Html.PartialAsync("_ProductList", Model)
</div>

<!-- Sorting Links -->
<div class="mt-3">
    <a href="@Url.Action("Index", new { search = searchQuery, categoryFilter = selectedCategory, sortOrder = ViewBag.NameSortParam })">Sort by Name</a> |
    <a href="@Url.Action("Index", new { search = searchQuery, categoryFilter = selectedCategory, sortOrder = ViewBag.PriceSortParam })">Sort by Price</a> |
    <a href="@Url.Action("Index", new { search = searchQuery, categoryFilter = selectedCategory, sortOrder = ViewBag.QuantitySortParam })">Sort by Quantity</a>
</div>

@section Scripts {
    <script>
        function testAjax() {
            $.ajax({
                url: '/Home/TestLoader',
                method: 'GET'
            });
        }
    </script>
}